function makeTall(){$("#main-nav > li").removeClass("active"),$(this).addClass("active")}function makeShort(){$(this).removeClass("active")}jQuery(window).load(function(e){skrollr.init({mobileCheck:function(){return!1}})}),$(window).load(function(){var a=$(".fluid-grid").masonry({columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".grid-item",percentPosition:!0,initLayout:!1,transitionDuration:0});if(a.on("layoutComplete",function(e,t){$(".grid-item").addClass("masonry-processed")}),a.masonry("layout"),"undefined"==typeof filter);else{var n=2,o=filter.total,i=filter.types,r=filter.month,l=filter.year;$("#link-load-content").click(function(e){var t;e.preventDefault(),n<=o&&($("#link-load-content span").html('<img src="/img/loading-dark.gif" />'),t=n,$("a#inifiniteLoader").show("fast"),$.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:"action=comms_scroll&page_no="+t+"&types="+i+"&month="+r+"&year="+l+'"',success:function(e){$("#link-load-content span").html("Load more");var t=$(e);a.append(t).masonry("appended",t)}})),o<++n&&$("#link-load-content").fadeOut()})}}),$(document).ready(function(){function e(){var e=$("#plant_rate").val(),t=$("#plant_tgw").val(),a=$("#plant_germination").val(),n=parseInt(e)*parseInt(t)/100*(100/parseInt(a));isNaN(n)&&(n=0),$("span#plant_KgHa").text(parseInt(n));n=$("span#plant_KgHa").text();var o=parseInt(n)/2.471;isNaN(o)&&(o=0),$("span#plant_KgAcre").text(parseInt(o))}function t(){var e=$("#seed_rate").val(),t=$("#seed_tgw").val(),a=parseInt(e)*parseInt(t)/100;isNaN(a)&&(a=0),$("span#seed_KgHa").text(parseInt(a));a=$("span#seed_KgHa").text();var n=parseInt(a)/2.471;isNaN(n)&&(n=0),$("span#seed_KgAcre").text(parseInt(n))}$("body").on("click","form#form-file .btn",function(e){e.preventDefault();var t=$(this),a=t.closest("form");t.addClass("btn-loading");var n=new FormData;n.append("file",$('input[name="file"]').prop("files")[0]),n.append("action","upload"),n.append("nonce",$('input[name="nonce"]').val()),n.append("consent",$('input[name="consent"]:checked').val()),n.append("name",$('input[name="name"]').val()),n.append("job",$('input[name="job"]').val()),n.append("email",$('input[name="email"]').val()),n.append("telephone",$('input[name="telephone"]').val()),n.append("letter",$('textarea[name="letter"]').val()),$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",contentType:!1,processData:!1,data:n,success:function(e){"success"==e.status?(a.hide(),a.next(".form-file-msg").removeClass("hide").addClass("alert-success").html(e.msg)):(t.removeClass("btn-loading"),a.next(".form-file-msg").removeClass("hide").html(e.msg))}})}),$("form#renewables_form .btn").click(function(e){e.preventDefault(),$("#renewables_form_msg").html('<img src="/img/loading-dark.gif" alt="Loading..." width="20" height="20">');var t=$("#name").val(),a=$("#email").val(),n=$("#telephone").val(),o=$("#tonnage").val();return t&&a&&n&&o?void $.ajax({type:"POST",url:"https://adm-agri.co.uk/wp-admin/admin-ajax.php",data:$("form#renewables_form").serialize(),dataType:"json",success:function(e){"success"==e.status&&$("form#renewables_form")[0].reset(),$("#renewables_form_msg").html(e.errmessage)}}):($("#renewables_form_msg").html("Please ensure all the compulsory form fields are filled out."),!1)}),$("form#contact_form .btn").click(function(e){e.preventDefault(),$("#contact_form_msg").html('<img src="/img/loading-dark.gif" alt="Loading...">');var t=$("form#contact_form input#name").val(),a=$("form#contact_form input#email").val(),n=$("form#contact_form input#telephone").val(),o=$("form#contact_form textarea#enquiry").val();return t&&a&&n&&o?void $.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:$("form#contact_form").serialize(),dataType:"json",success:function(e){"success"==e.status&&$("form#contact_form")[0].reset(),$("#contact_form_msg").html(e.errmessage)}}):($("#contact_form_msg").html("Please ensure all the required form fields are filled out."),!1)}),$("a.modal-link").click(function(e){e.preventDefault();var t=$(this).attr("data-modal-slug");$("#"+t+"-modal").modal({autoOpen:!0})}),$("a.modal-graph-link").on("click",function(e){e.preventDefault();var t=$(this).attr("data-commodity-slug"),a=$(this).attr("data-commodity-id"),n="#"+t+"-graph";$("#"+t+"-modal").modal({autoOpen:!0,onOpen:function(){$(n).load("/markets/?commodity="+a+"&futures-graph=1")}})}),$("form#quote_form .btn").click(function(e){e.preventDefault(),$("#quote_form_msg").html('<img src="/img/loading-dark.gif" alt="Loading..." width="20" height="20">');var t=$("#name").val(),a=$("#email").val(),n=$("#telephone").val(),o=$("#telephone").val();return t&&a&&n&&o?void $.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:$("form#quote_form").serialize(),dataType:"json",success:function(e){"success"==e.status&&$("form#quote_form")[0].reset(),$("#quote_form_msg").html(e.errmessage)}}):($("#quote_form_msg").html("Please ensure all the compulsory form fields are filled out."),!1)}),$(".fullwidth-video").length&&$(".fullwidth-video").fitVids(),$("#hero-image").slider({directionNav:!0,controlNav:!0,start:function(e){$("#hero-image").removeClass("loading")}}),$("#tweets-slider").slider({controlNav:!0,start:function(e){$("#tweets-slider").removeClass("loading")}}),$("#hero-page").slider({directionNav:!0,controlNav:!0,start:function(e){$("#hero-page").removeClass("loading")}}),$("#weather-slider").slider({controlNav:!0,start:function(e){$("#weather-slider").removeClass("loading")}}),$("#section-image-slider").slider({animation:"slide",directionNav:!1,controlNav:!0,animationLoop:!1,slideshow:!1,itemWidth:206,itemMargin:30,start:function(e){$("#section-image-slider").removeClass("loading")}}),620<$(window).width()&&$("#onepage-nav, #section-filter").scrollToFixed(),$("#onepage-nav ul").onePageNav({currentClass:"current",changeHash:!0,scrollSpeed:750,scrollThreshold:.2,easing:"swing",begin:function(){$("body").removeClass("report-menu-open")}}),$("button.navbar-toggle").click(function(){$("body").toggleClass("menu-open")}),$("button.reportbar-toggle").click(function(){$("body").toggleClass("report-menu-open")}),$(".primary-header-btn.search").click(function(e){e.preventDefault(),$(".search-header").toggleClass("active"),$("#search-text").focus()}),$("#plant_rate, #plant_tgw, #plant_germination").on({keyup:e,change:e}),$("#seed_rate, #seed_tgw").on({keyup:t,change:t}),$("#seed_rate, #seed_tgw, #plant_rate, #plant_tgw, #plant_germination").keydown(function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&!0===e.ctrlKey||35<=e.keyCode&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault()}),$("#filter_form").submit(function(e){e.preventDefault();var t=$("#filter_date option:selected");""===t.val()?window.location="https://adm-agri.co.uk/communications/"+$("#filter_type").val():window.location="https://adm-agri.co.uk/communications/"+document.getElementById("filter_type").value+"/"+t.closest("optgroup").attr("label")+"/"+document.getElementById("filter_date").value}),$(".accordion").hasClass("open")?($(".accordion > dd").show(),$(".accordion > dt").addClass("accordion-active")):($(".accordion > dd").hide(),$(".accordion > dd:first-of-type").show(),$(".accordion > dt:first-of-type").addClass("accordion-active"),jQuery(".accordion > dt").on("click",function(){return $this=$(this),$target=$this.next(),$this.hasClass("accordion-active")||($this.parent().children("dd").slideUp(),$this.parent().children("dt").removeClass("accordion-active"),$this.addClass("accordion-active"),$target.addClass("active").slideDown()),!1}))}),$.fn.hoverIntent=function(e,t,a){var o={interval:100,sensitivity:8,timeout:300};o="object"==typeof e?$.extend(o,e):$.isFunction(t)?$.extend(o,{over:e,out:t,selector:a}):$.extend(o,{over:e,out:e,selector:t});var n,i,r,l,s=function(e){n=e.pageX,i=e.pageY},c=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),Math.sqrt((r-n)*(r-n)+(l-i)*(l-i))<o.sensitivity?($(t).off("mousemove.hoverIntent",s),t.hoverIntent_s=!0,o.over.apply(t,[e])):(r=n,l=i,void(t.hoverIntent_t=setTimeout(function(){c(e,t)},o.interval)))},d=function(e){var a=$.extend({},e),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"===e.type?(r=a.pageX,l=a.pageY,$(n).on("mousemove.hoverIntent",s),n.hoverIntent_s||(n.hoverIntent_t=setTimeout(function(){c(a,n)},o.interval))):($(n).off("mousemove.hoverIntent",s),n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){var e,t;e=a,(t=n).hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,o.out.apply(t,[e])},o.timeout)))};return this.on({"mouseenter.hoverIntent":d,"mouseleave.hoverIntent":d},o.selector)},clickedLink="",$(window).resize(function(){640<$(window).width()?$("ul#main-nav li.dropdown").hoverIntent(makeTall,makeShort):$("nav#main > ul > li > a").click(function(e){e.preventDefault(),$("nav#main ul li").removeClass("active"),$(this).parent().addClass("active"),targetLink=$(this).attr("href"),targetLink==clickedLink?document.location.href=$(this).attr("href"):clickedLink=$(this).attr("href")})}),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$("nav#main > ul > li > a").click(function(e){$(this).closest("li").children(".sub-menu").length?(e.preventDefault(),$("nav#main ul li").removeClass("active"),$(this).parent().addClass("active"),targetLink=$(this).attr("href"),targetLink==clickedLink?document.location.href=$(this).attr("href"):clickedLink=$(this).attr("href")):document.location.href=$(this).attr("href")}):$("ul#main-nav li.dropdown").hoverIntent(makeTall,makeShort);
